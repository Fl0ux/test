{% extends 'base.html.twig' %}

{% block title %} - Panier{% endblock %}

{% block stylesheets %}
  <link rel="stylesheet" href="/css/basket.css">
{% endblock %}

{% block content %}

  <div class="row">
    <div class="col"><h1 class="mt-2 mb-1">Panier</h1></div>
  </div>

  <div class="row">
    <div class="col">
      <div class="table-responsive">

        <table class="table table-striped table-hover">
          <thead>
          <tr>
            <th>Produit</th>
            <th>Prix unitaire</th>
            <th>Quantit√©</th>
            <th>Prix total</th>
          </tr>
          </thead>

          <tbody>
          {% for item in order.items -%}
            <tr>
              <td>
                {{ item.product.title }}<br>
                <span class="text-secondary">{{ item.product.brand }}</span>
              </td>
              <td class="text-end">
                {{ item.product.price|format_currency('EUR', locale='fr') }}
              </td>
              <td><input type="number" name="{{ item.product.title|slug }}" value="{{ item.quantity }}"></td>
              <td class="text-end">{{ (item.product.price * item.quantity)|format_currency('EUR', locale='fr') }}</td>
            </tr>
          {%- endfor %}
          </tbody>

          <tfoot class="text-end">
          <tr>
            <td colspan="2"></td>
            <td>Sous-total HT</td>
            <td>{{ order.totalPriceHT|format_currency('EUR', locale='fr') }}</td>
          </tr>

          {% set promotion = order.calculatePromotions %}
          {% if promotion -%}
            <tr>
              <td colspan="2"></td>
              <td>Promotion</td>
              <td>- {{ promotion|format_currency('EUR', locale='fr') }}</td>
            </tr>
          {%- endif %}

          <tr>
            <td colspan="2"></td>
            <td>frais de port HT</td>
            <td>{{ order.shippingCosts|format_currency('EUR', locale='fr') }}</td>
          </tr>
          <tr>
            <td colspan="2"></td>
            <td>TVA</td>
            <td>{{ order.VAT|format_currency('EUR', locale='fr') }}</td>
          </tr>
          <tr>
            <td colspan="2"></td>
            <td>Total TTC</td>
            <td>{{ order.totalPriceTTC|format_currency('EUR', locale='fr') }}</td>
          </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

  <div class="row text-end">
    <div class="col">
      <button class="btn btn-success">Payer</button>
    </div>
  </div>

{% endblock %}

{% block javascript %}
  <script src="/js/basket.js"></script>
{% endblock %}
